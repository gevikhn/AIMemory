# AI Memory System TODO

## 项目概述
AI长期记忆系统，实现三层记忆架构（短期/中期/长期），集成图数据库和向量搜索功能。

## 当前进度

### 已完成 (Completed) ✅
- [x] 创建CMake项目骨架和基础目录结构
  - DoD: 模块化目录结构，CMakeLists.txt配置完成
  - 完成时间: 2025-09-16

- [x] 设置基础日志和配置系统
  - DoD: Logger和Config类实现，支持多级别日志和配置管理
  - 完成时间: 2025-09-16

- [x] 创建简单CLI工具(memctl)
  - DoD: 基本命令行解析，help/version功能，模块化命令结构
  - 完成时间: 2025-09-16

- [x] 设置单元测试框架
  - DoD: GTest集成，core模块测试用例，CTest配置
  - 完成时间: 2025-09-16

### 进行中 (In Progress) 🔄
- [ ] 创建TODO.md文件和项目进度跟踪 (当前负责人: @system)
  - DoD: TODO.md创建，包含完整的里程碑规划
  - 预计工作量: 1小时
  - 依赖: 无

### 待开始 (Pending) ⏳

#### M0 - 项目骨架完善
- [ ] 测试项目构建和基础功能
  - DoD: `./memctl --help`可运行，所有单元测试通过，构建无警告
  - 预计工作量: 2小时
  - 依赖: 当前所有已完成任务

- [ ] 创建配置文件和示例
  - DoD: 默认config.yaml，CLI示例脚本，README基础说明
  - 预计工作量: 1小时
  - 依赖: CLI工具完成

#### M1 - SearchIndex倒排索引 (优先级: 高)
- [ ] 实现基础分词和词典结构
  - DoD: Tokenizer接口，FST/前缀压缩词典，UTF-8支持
  - 预计工作量: 6小时
  - 依赖: memory_core

- [ ] 实现倒排表和posting lists
  - DoD: Term→PostingList映射，docID差分压缩，跳表索引
  - 预计工作量: 8小时
  - 依赖: 基础分词

- [ ] 实现BM25检索算法
  - DoD: BM25评分，布尔查询，字段加权，TopK返回
  - 预计工作量: 6小时
  - 依赖: 倒排表

- [ ] 实现WAL和快照持久化
  - DoD: 崩溃恢复，段文件管理，快照一致性
  - 预计工作量: 10小时
  - 依赖: BM25检索

#### M2 - GraphStore图存储 (优先级: 高)
- [ ] 实现节点和边的存储结构
  - DoD: 变长记录，属性存储，标签索引
  - 预计工作量: 8小时
  - 依赖: memory_core

- [ ] 实现邻接索引和CSR结构
  - DoD: 出入度索引，k-hop查询，边类型过滤
  - 预计工作量: 10小时
  - 依赖: 节点边存储

- [ ] 实现图遍历和PPR算法
  - DoD: k-hop扩展，个性化PageRank，社区检测基础
  - 预计工作量: 12小时
  - 依赖: 邻接索引

#### M3 - RecallPipeline召回管道 (优先级: 中)
- [ ] 实现多阶段检索管道
  - DoD: BM25+图扩散，降级策略，可配置流程
  - 预计工作量: 8小时
  - 依赖: SearchIndex + GraphStore

- [ ] 实现重排和打包逻辑
  - DoD: 综合评分，Token预算控制，引用路径
  - 预计工作量: 6小时
  - 依赖: 多阶段检索

#### M4 - 图稀疏化和优化 (优先级: 中)
- [ ] 实现度上限和边剪枝
  - DoD: 按边类型限制，权重阈值剪枝，冷边归档
  - 预计工作量: 6小时
  - 依赖: GraphStore

- [ ] 实现L1/L2分层索引
  - DoD: 概念层超节点，分层查询路径
  - 预计工作量: 10小时
  - 依赖: 图稀疏化

#### M5 - 版本链和冲突处理 (优先级: 低)
- [ ] 实现版本链数据结构
  - DoD: VERSION_NEXT边，ACTIVE_OF指针，历史追溯
  - 预计工作量: 6小时
  - 依赖: GraphStore

- [ ] 实现冲突检测和优先级评分
  - DoD: 矛盾识别，来源可信度评分，审计队列
  - 预计工作量: 8小时
  - 依赖: 版本链

#### M6 - 巩固和生命周期管理 (优先级: 低)
- [ ] 实现PromoterJob定时任务
  - DoD: 短中长期迁移，触发条件，DERIVED_FROM维护
  - 预计工作量: 10小时
  - 依赖: GraphStore基础

- [ ] 实现睡眠巩固批处理
  - DoD: 社区检测，概念生成，权重重算
  - 预计工作量: 12小时
  - 依赖: PromoterJob

#### M8 - VectorIndex向量索引 (优先级: 可选)
- [ ] 实现HNSW向量索引
  - DoD: 插件式接口，持久化，可关闭降级
  - 预计工作量: 16小时
  - 依赖: 无（独立模块）

## 当前里程碑
**目标**: M0项目骨架完善
**预计完成**: 2025-09-17
**进度**: 80% (4/5 完成)

## 下个里程碑
**目标**: M1 SearchIndex倒排索引MVP
**预计开始**: 2025-09-17
**预计完成**: 2025-09-20
**关键交付**: BM25检索功能，CLI可调用

## 风险和阻塞项
暂无

## 协作信息
- 当前活跃开发者: @system
- 代码审查者: TBD
- 架构负责人: 参考 doc/ai_中长期记忆系统架构设计_v1.0.md

---
*最后更新: 2025-09-16*
*下次更新: 每个任务完成后立即更新*